# Data Model for Physical AI Textbook

This document outlines the key entities and their relationships for the Physical AI & Humanoid Robotics Textbook project.

## 1. Chapter (Textbook Content)

Represents an individual chapter of the textbook.

-   **`id`**: Unique identifier (e.g., `01-module-1-ros2/chapter-title`).
-   **`title`**: Title of the chapter (e.g., "Introduction to Physical AI").
-   **`module`**: The module the chapter belongs to (e.g., `01-module-1-ros2`).
-   **`content_raw`**: Full markdown content of the chapter, including all sections, code, diagrams, etc.
-   **`learning_objectives`**: List of learning objectives for the chapter.
-   **`real_world_examples`**: Textual descriptions or references to real-world humanoid examples.
-   **`code_snippets`**: List of Python 3.11+ code blocks with Roman Urdu comments.
-   **`mermaid_diagrams`**: List of Mermaid diagram definitions.
-   **`screenshots`**: List of placeholder image paths for screenshots.
-   **`mini_project_description`**: Description of the mini-project for the chapter.
-   **`mcqs`**: A list of 5 multiple-choice questions with options and correct answers.
-   **`reading_time`**: Estimated reading time.
-   **`difficulty_level`**: (e.g., Beginner, Intermediate, Advanced) â€“ potentially dynamic for personalization.
-   **`urdu_translation`**: Cached Urdu translation of the content (optional, for caching feature).

## 2. User

Represents a user interacting with the textbook, primarily for authentication and personalization.

-   **`id`**: Unique user identifier.
-   **`email`**: User's email address (for Better-Auth).
-   **`python_proficiency_level`**: User's self-assessed Python proficiency.
-   **`ros2_experience`**: User's self-assessed ROS 2 experience.
-   **`gpu_robotics_hardware_access`**: Boolean indicating access to GPU/robotics hardware.
-   **`education_career_stage`**: User's current educational or career stage.
-   **`personalization_level`**: User's preferred content level (e.g., "Beginner", "Intermediate", "Advanced").
-   **`last_accessed_chapter`**: Reference to the last chapter the user was reading.

**Relationships**: One-to-many relationship with `Chapter` (through `personalization_level` affecting `Chapter` presentation).

## 3. RAG Chatbot Interaction

Represents a query and response interaction with the RAG chatbot.

-   **`id`**: Unique interaction identifier.
-   **`user_id`**: Foreign key to `User`.
-   **`query_text`**: The question posed by the user.
-   **`response_text`**: The answer generated by the RAG chatbot.
-   **`retrieved_context_ids`**: List of IDs of `Qdrant_Chunk`s used to generate the response.
-   **`timestamp`**: Time of the interaction.

## 4. Qdrant_Chunk (Vector Store Document Chunk)

Represents a chunk of textbook content indexed in Qdrant for RAG.

-   **`id`**: Unique identifier (Qdrant point ID).
-   **`vector`**: The embedding vector of the content chunk.
-   **`chapter_id`**: Foreign key to `Chapter` (`id`).
-   **`section_title`**: Title of the section this chunk belongs to.
-   **`content_text`**: The textual content of the chunk.
-   **`page_number`**: (Optional) Page number if applicable.
-   **`metadata`**: Additional metadata (e.g., difficulty, keywords, source).

**Relationships**: One-to-many relationship with `Chapter` (a chapter is broken into many `Qdrant_Chunk`s).

## Data Flow:

1.  **Content Ingestion**: Markdown files (Chapter content) are parsed, chunked, and embedded into `Qdrant_Chunk`s which are then stored in Qdrant.
2.  **User Interaction**: Users log in (via Better-Auth), their preferences are stored.
3.  **Personalization**: Chapter content is dynamically rewritten based on `User.personalization_level`.
4.  **RAG Chatbot**: User queries are embedded, relevant `Qdrant_Chunk`s are retrieved, and an LLM generates `RAG_Chatbot_Interaction` responses based on the retrieved context.
5.  **Urdu Translation**: Chapters can be translated, with results optionally cached in `Chapter.urdu_translation`.
